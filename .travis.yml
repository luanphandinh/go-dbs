language: go

matrix:
  include:
    - name: "Test MySQL"
      go: 1.12.x
      services:
        - mysql
      env:
        - PLATFORM=mysql
        - SERVER_NAME=127.0.0.1
        - DB_NAME=workspace
        - DB_USER=root
      before_install:
        - go get -v github.com/go-sql-driver/mysql
        - mysql -e 'CREATE DATABASE workspace;'

    - name: "Test PostgresSQL"
      go: 1.12.x
      services:
        - postgresql
      env:
        - PLATFORM=postgres
        - SERVER_NAME=127.0.0.1
        - DB_NAME=workspace
        - DB_USER=postgres
      before_install:
        - go get -v github.com/lib/pq
        - psql -c 'create database workspace;' -U postgres

    - name: "Test SQLite"
      go: 1.12.x
      env:
        - PLATFORM=sqlite3
      before_install:
        - go get -v github.com/mattn/go-sqlite3

script:
  - go test ./...
